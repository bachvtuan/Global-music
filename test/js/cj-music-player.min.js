jQuery(document).ready(function() {
  var b = jQuery.fn.cjMusicPlayer();
  b[0] ? $("head").append('<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />') : b[1] && $("head").append('<meta name="viewport" content="width=device-width, initial-scale=1.0" />')
});
(function(b) {
  b.fn.cjMusicPlayer = function() {
    function Y() {
      var b = document.URL,
          c = 0,
          f, i, b = b.substr(b.indexOf(":/") + 7, 10);
      i = b.length;
      for (var g = 0; g < i; g++) f = b.charAt(g), c += f.charCodeAt(0);
      return 1037 === c ? !0 : !1
    }
    function ga(b, c) {
      var f = document.getElementsByTagName(b)[0],
          i = !1;
      "undefined" !== typeof f && (i = f.canPlayType ? !0 : !1);
      return c ? f : i
    }
    function Z(b) {
      return "true" === b ? !0 : !1
    }
    function aa(b) {
      if (c.length) for (var j = c.length; j--;) c[j].id && c[j].id !== b && c[j].checkPause()
    }
    var c = [],
        pa = b.browser.msie,
        M = ga("audio"),
        N = b(".cj-music-player"),
        qa = b.browser.mozilla ? "" : "about:blank",
        ha = "undefined" !== typeof DetectTierIphone ? DetectTierIphone() : !1,
        ia = "undefined" !== typeof DetectTierTablet ? DetectTierTablet() : !1;
    N.length && Y() && N.each(function() {
      function oa() {
        d = 0;
        r = [];
        w = [];
        G = 0;
        m = k.length;
        O = m - 1;
        P = Q = !0;
        l = H = R = !1;
        I = e.attr("id") ? e.attr("id") : null;
        B = e.find("object");
        s = e.find(".cj-song-text");
        n = e.find(".cj-music-button");
        o = e.find(".cj-music-container");
        x = Z(e.attr("data-autoplay").toString());
        S = Z(e.attr("data-startopen").toString());
        T = e.attr("data-volume") ? 0.01 * e.attr("data-volume") : 0.75;
        var a = e.attr("class").split("-");
        ba = "cj-music-btn-active-" + a[a.length - 2];
        c[c.length] = {
          checkPause: ra,
          flash: sa,
          toggle: ta,
          change: ua,
          next: va,
          id: I
        };
        if (Z(e.attr("data-randomize").toString())) {
          var a = [],
              t;
          for (t = 0; t < m; t++) a[t] = k[t];
          for (k = []; 0 < a.length;) t = Math.random() * a.length | 0, k[k.length] = a[t], a.splice(t, 1)
        }
        for (a = 0; a < m; a++) r[a] = k[a].url, w[a] = k[a].title;
        if (ia || ha) x = !1;
        if (M) b("<source />").attr("src", r[0]).attr("type", "audio/mpeg").prependTo(C), b("<source />").attr("src", r[0].split("mp3").join("wav")).attr("type", "audio/wav").prependTo(C), 1 === m && C.attr("loop", "loop"), h = C[0], h.volume = T, h.addEventListener("ended", ca, !1);
        else if (B.length) {
          B = B.attr("id");
          try {
            U().storeVars(T, r, I)
          } catch (f) {}
        }
        p = e.find(".cj-music-play");
        q = e.find(".cj-music-pause");
        J = e.find(".cj-music-numbers");
        K = e.find(".cj-music-left").data("isArrow", !0);
        L = e.find(".cj-music-right").data({
          isArrow: !0,
          isRight: !0
        });
        D = e.find(".cj-current-song").length && s.length ? !0 : !1;
        E = p.length && q.length ? !0 : !1;
        ja = K.length && L.length ? !0 : !1;
        y = o.length ? !0 : !1;
        da = n.length ? !0 : !1;
        J.length ? (ea = !0, fa = J.html()) : usingtNumbers = !1;
        E && !x && (q.css("display", "none"), p.css("display", "inline-block"));
        ja && 1 < m ? (K.click(F), L.click(F)) : (K.length && K.hide(), L.length && L.hide());
        E ? (p.click(u), q.click(u)) : (p.length && p.hide(), q.length && q.hide());
        da ? n.click(j) : y && o.addClass("cj-music-no-button");
        D && s.html(w[d]).mouseover(i).mouseout(g).click(aa);
        ea && J.html((d + 1).toString() + fa + m.toString());
        x || S ? j() : P = !1;
        k = null
      }
      function j(a) {
        a && a.stopPropagation();
        H ? (n.removeClass(ba), l = !0, u(), y && f(!1)) : (n.addClass(ba), 0 === G && y && (V = o.outerWidth(), o.css("display", "block").width(0), ka = parseInt(o.css("left"), 10), G = V - parseInt(n.css("width"), 10) + 1), P ? (x && u(), S ? (n.css("left", G), y && o.css({
          left: 0,
          width: V
        }), x && W()) : x && y && f(!0)) : (u(), y && f(!0)));
        H = !H;
        P = !1
      }
      function f(a) {
        a ? (n.stop(!0).animate({
          left: G
        }, 750, "easeOutQuint"), o.stop(!0).animate({
          left: 0,
          width: V
        }, 750, "easeOutQuint", W)) : (z && clearInterval(z), A && clearTimeout(A), n.stop(!0).animate({
          left: 0
        }, 750, "easeOutQuint"), o.stop(!0).animate({
          left: ka,
          width: 0
        }, 750, "easeOutQuint", N), S = !1)
      }
      function i(a) {
        a.stopPropagation();
        R = !0
      }
      function g(a) {
        a.stopPropagation();
        R = !1
      }
      function N() {
        D && (s.css("margin-left", 0), v = 0)
      }
      function W(a) {
        if (D) {
          if (Q) {
            var c = w[d],
                c = b("<span />").html(c).css("display", "none").appendTo(e),
                f = c.width();
            c.remove();
            la = -(f === f | 0 ? f : (f | 0) + 1);
            v = 0;
            s.css("margin-left", v);
            s.html(w[d] + w[d])
          }!a ? ma() : A = setTimeout(ma, 500);
          Q = !1
        }
      }
      function ma() {
        z = setInterval(Y, 50)
      }
      function Y() {
        R || (v > la ? v -= 1 : v = 0, s.css("margin-left", v))
      }
      function ca(a) {
        a.stopPropagation();
        l = !1;
        F(null)
      }
      function F(a) {
        A && clearTimeout(A);
        z && clearInterval(z);
        aa(I);
        Q = !0;
        null !== a ? b(this).data("isArrow") ? (a = b(this).data("isRight") ? !0 : !1) ? d < O ? d++ : d = 0 : 0 < d ? d-- : d = O : a = !0 : (d < O ? d++ : d = 0, a = !0);
        if (M) {
          h.removeEventListener("ended", ca, !1);
          h.pause();
          if (!pa) h.src = qa;
          b.browser.msie ? C.children("source").each(function() {
            b(this).attr("src", r[d])
          }) : h.src = ga("audio", !0).canPlayType("audio/mpeg;") ? r[d] : r[d].split("mp3").join("wav");
          h.volume = T;
          h.load();
          h.play();
          h.addEventListener("ended", ca, !1)
        } else
        try {
          U().changeSong(a)
        } catch (c) {}
        D && s.html(w[d]);
        ea && J.html((d + 1).toString() + fa + m.toString());
        E && (p.css("display", "none"), q.css("display", "inline-block"));
        l = !0;
        W(!0)
      }
      function ra() {
        da ? H && j() : (l = !0, u())
      }
      function u(a) {
        a && a.stopPropagation();
        if (l) {
          A && clearTimeout(A);
          z && clearInterval(z);
          if (M) h.pause();
          else
          try {
            U().togglePlayPause(!1)
          } catch (b) {}
          E && (q.css("display", "none"), p.css("display", "inline-block"));
          l = !1
        } else {
          aa(I);
          if (M) h.play();
          else
          try {
            U().togglePlayPause(!0)
          } catch (c) {}
          a && D && W();
          E && (p.css("display", "none"), q.css("display", "inline-block"));
          l = !0
        }
      }
      function ta(a) {
        "undefined" !== typeof a && (a ? l ? (X = !0, u()) : X = !1 : X && (X = !1, u()))
      }
      function ua(a) {
        "undefined" !== typeof a && -1 < a && a < m && (d = a, F(!0))
      }
      function va() {
        F(null)
      }
      function U() {
        return !b.browser.msie ? document[B] : window[B]
      }
      function sa() {
        l = !1;
        F(null)
      }
      var e = b(this),
          C = e.find(".cj-audio"),
          na = e.find(".cj-song-list");
      if (C.length && na.length) {
        var T, J, l, D, X, fa, ja, ea, E, y, Q, da, la, z, S, P, v, s, H, B, o, G, ka, R, n, V, w, A, ba, h, q, L, x, O, r, d, K, p, I, m, k = [];
        na.children("li").each(function(a) {
          k[a] = {
            title: "" !== b.trim(b(this).text()) ? b(this).html() : "",
            url: b(this).attr("data-song")
          }
        });
        k.length && oa()
      }
    });
    b.fn.cjMusicPlayer.apiCall = function(b, j, f) {
      if (c.length) {
        for (var i = c.length, g = -1; i--;) if (c[i].id && c[i].id === j) {
          g = i;
          break
        }
        if (-1 !== g) switch (b) {
        case "flash":
          c[g].flash();
          break;
        case "toggleMusic":
          c[g].toggle(f);
          break;
        case "changeSong":
          c[g].change(f);
          break;
        case "nextSong":
          c[g].next();
          break;
        case "destroy":
          c[g].destroy(), c.splice(g, 1)
        }
      }
    };
    return [ia, ha]
  }
})(jQuery);

function cjFromFlash(b) {
  jQuery.fn.cjMusicPlayer.apiCall("flash", b)
};